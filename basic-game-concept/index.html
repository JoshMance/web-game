
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        const SIZE         = 8;
        const SIZE_SQUARED = SIZE*SIZE;

        function get_valid_move_indexes(tile_index) {
            var tiles          = $('.tiles-grid').children();
            var valid_indexes  = new Set();
            var col_moves      = new Array(-1*SIZE, SIZE); 
            var row_moves      = new Array(-1, 1); 
    
            for (move in col_moves) {
                var index = tile_index + parseInt(move);
                while (index >= 0 && index < SIZE_SQUARED) {
                    console.log(tiles[index].children[0].classList);
                    if (tiles[index].children[0].classList.contains('empty-space')) {
                        valid_indexes.add(index);
                    }
                    else {
                        break;
                    }
                    index += parseInt(move);
                }
            }
            return valid_indexes;
        }

        $(document).ready(function() {

            // The game visual is a grid of tile divs. Tokens are children of these divs 
            // Token movement involves:
            //     1. Animating a 'movement' token over the target token
            //     2. Appending the target token to its new tile and making it invisible
            //     3. Animating the movement token sliding to the new tile, then deleting it
            //     4. Showing the target token

            // Setting up the game-container with tiles and tokens
            for (let index = 0; index < 64; index++) {
                
                $('.tiles-grid').append($('<div>', {id: index, class: 'tile'}))

                var overlay_class = 'empty-space'
                if (index < 16)  {overlay_class = 'token light'}
                if (index >= 48) {overlay_class = 'token dark'}
                    
                $('.tiles-grid').children().last().append($('<div>', {class: overlay_class, text: index}))
            
            }

            var indexes = get_valid_move_indexes(35);
            console.log(indexes);


            // const tileOffset = $('.tiles-grid').children().last().offset();
            //         console.log(tileOffset);
        });

    </script>
</head>
<body>
    <div class="game-container">
        <div class="tiles-grid"></div>
    </div>
    
    
</body>
</html> 

